<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formularz Klienta BAF - Wiktoria Nojek</title>
    <link rel="icon" type="image/png" href="baf_logo_p.png">
    <style>
        :root { --primary-color: #1a365d; --accent-color: #2b6cb0; --bg-color: #f7fafc; --white: #ffffff; --text-color: #2d3748; --border-radius: 8px; }
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { background: var(--white); width: 100%; max-width: 900px; padding: 40px; border-radius: var(--border-radius); box-shadow: 0 4px 6px rgba(0,0,0,0.1); position: relative; }
        .logo-link { position: absolute; top: 30px; right: 40px; display: block; transition: transform 0.2s; }
        .logo-link:hover { transform: scale(1.05); }
        .logo { width: 120px; height: auto; display: block; }
        header { margin-bottom: 40px; padding-right: 140px; }
        h1 { color: var(--primary-color); font-size: 24px; margin-bottom: 10px; }
        h2 { font-size: 16px; color: #718096; font-weight: 400; margin-top: 0; }
        .advisor-info { display: inline-block; background-color: #ebf8ff; color: var(--accent-color); padding: 8px 12px; border-radius: 4px; font-size: 0.95em; margin-top: 10px; line-height: 1.4; transition: background-color 0.2s; }
        .advisor-info:hover { background-color: #bee3f8; }
        .advisor-link { text-decoration: none; color: inherit; display: block; cursor: pointer; }
        .advisor-name { font-weight: 700; display: block; }
        .advisor-title { font-weight: 400; font-size: 0.9em; opacity: 0.9; }
        .form-section { margin-bottom: 30px; border-bottom: 1px solid #e2e8f0; padding-bottom: 20px; }
        .form-section h3 { color: var(--primary-color); font-size: 18px; margin-bottom: 20px; border-left: 4px solid var(--accent-color); padding-left: 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } .logo-link { position: static; margin-bottom: 20px; display: inline-block; } header { padding-right: 0; } }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; font-weight: 500; font-size: 0.9rem; }
        input, select, textarea { width: 100%; padding: 10px 12px; border: 1px solid #cbd5e0; border-radius: var(--border-radius); font-size: 1rem; transition: border-color 0.3s; box-sizing: border-box; }
        input:focus, select:focus, textarea:focus { border-color: var(--accent-color); outline: none; box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2); }
        textarea { resize: vertical; min-height: 100px; }
        .children-years-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 10px; }
        .radio-group { display: flex; gap: 20px; margin-bottom: 10px; flex-wrap: wrap; }
        .radio-option { display: flex; align-items: center; cursor: pointer; font-size: 0.9rem; }
        .radio-option input { width: auto; margin-right: 8px; }
        .checkbox-container { display: flex; align-items: flex-start; margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: var(--border-radius); border: 1px solid #e2e8f0; }
        .checkbox-container input[type="checkbox"] { margin-top: 4px; margin-right: 12px; width: 20px; height: 20px; flex-shrink: 0; cursor: pointer; }
        .checkbox-container label { margin-bottom: 0; font-size: 0.9rem; color: var(--text-color); cursor: pointer; line-height: 1.4; }
        .file-upload-wrapper { border: 2px dashed #cbd5e0; padding: 20px; background: #f8fafc; text-align: center; border-radius: var(--border-radius); transition: all 0.3s; }
        .file-upload-wrapper:hover { border-color: var(--accent-color); background: #edf2f7; }
        input[type="file"] { display: none; }
        .custom-file-upload { display: inline-block; padding: 10px 20px; cursor: pointer; background: white; border: 1px solid #cbd5e0; border-radius: 4px; font-weight: 600; color: var(--primary-color); transition: 0.3s; }
        .custom-file-upload:hover { background-color: #ebf8ff; border-color: var(--accent-color); }
        .file-list { list-style: none; padding: 0; margin-top: 15px; text-align: left; }
        .file-item { background: white; border: 1px solid #e2e8f0; padding: 8px 12px; margin-bottom: 8px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .file-item-name { font-weight: 500; color: #2d3748; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 80%; }
        .remove-file-btn { background: transparent; color: #e53e3e; border: none; cursor: pointer; font-size: 1.1rem; padding: 0 5px; transition: color 0.2s; }
        .remove-file-btn:hover { color: #c53030; transform: scale(1.1); }
        .file-hint { font-size: 0.8rem; color: #718096; margin-top: 10px; }
        .email-hint { font-size: 0.85rem; color: #4a5568; margin-top: 10px; font-style: italic; background: #fffaf0; padding: 8px; border-radius: 4px; border-left: 3px solid #ed8936; }
        .loading-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.95); z-index: 9999; justify-content: center; align-items: center; flex-direction: column; text-align: center; padding: 20px; }
        .spinner { width: 60px; height: 60px; border: 6px solid #e2e8f0; border-top: 6px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 25px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loading-title { font-size: 1.5rem; color: var(--primary-color); font-weight: bold; margin-bottom: 10px; }
        .loading-subtitle { font-size: 1rem; color: #4a5568; max-width: 500px; line-height: 1.5; }
        .security-badge { display: flex; align-items: center; justify-content: center; background-color: #f0fdf4; color: #15803d; border: 1px solid #bbf7d0; padding: 10px 20px; border-radius: 50px; font-size: 0.85rem; font-weight: 600; width: fit-content; margin: 0 auto 25px auto; box-shadow: 0 2px 4px rgba(0,0,0,0.03); gap: 10px; transition: transform 0.2s; }
        .security-badge:hover { transform: translateY(-1px); box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .security-badge svg { width: 16px; height: 16px; fill: currentColor; }
        .company-stamp { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0; color: #4a5568; font-size: 0.9rem; line-height: 1.6; }
        .company-name { font-weight: 700; color: var(--primary-color); text-transform: uppercase; letter-spacing: 0.5px; }
        .company-website { margin-top: 8px; display: inline-block; }
        .company-website a { color: var(--accent-color); text-decoration: none; font-weight: 600; border-bottom: 1px dashed var(--accent-color); padding-bottom: 2px; transition: all 0.2s; }
        .company-website a:hover { border-bottom-style: solid; color: var(--primary-color); }
        .footer-copy { text-align: center; font-size: 0.75rem; color: #cbd5e0; margin-top: 20px; }
        .legal-note { font-size: 0.75rem; color: #718096; margin-top: 15px; line-height: 1.5; text-align: justify; }
        .legal-note a { color: var(--accent-color); text-decoration: none; }
        .legal-note a:hover { text-decoration: underline; }
        button.submit-btn { background-color: var(--primary-color); color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: var(--border-radius); cursor: pointer; width: 100%; transition: background-color 0.3s; font-weight: bold; }
        button.submit-btn:hover { background-color: var(--accent-color); }
        button:disabled { background-color: #a0aec0; cursor: not-allowed; }
        #message { display: none; margin-top: 20px; padding: 15px; border-radius: var(--border-radius); text-align: center; }
        .success { background-color: #c6f6d5; color: #22543d; border: 1px solid #9ae6b4; }
        .error { background-color: #fed7d7; color: #822727; border: 1px solid #feb2b2; }
    </style>
</head>
<body>

<div id="loadingOverlay" class="loading-overlay">
    <div class="spinner"></div>
    <div class="loading-title">Trwa bezpieczne wysyłanie danych...</div>
    <div class="loading-subtitle">Prosimy o chwilę cierpliwości. Proces może potrwać od 15 do 60 sekund w zależności od wielkości załączników. Nie zamykaj tej karty.</div>
</div>

<div class="container">
    <a href="https://biuroanalizyfinansowej.pl/" target="_blank" class="logo-link" title="Przejdź na stronę główną">
        <img src="baf_logo.png" alt="Logo BAF" class="logo">
    </a>
    <header>
        <h1>Formularz Danych Klienta</h1>
        <h2>Proszę o dokładne uzupełnienie poniższych danych w celu przygotowania dokumentacji.</h2>
        <div class="advisor-info">
            <a href="https://q-r.to/WiktoraNojekBiuroBAF" target="_blank" class="advisor-link" title="Kliknij, aby zobaczyć wizytówkę">
                <span class="advisor-name">Twój opiekun: Wiktoria Nojek</span>
                <span class="advisor-title">Doradca klienta biznesowego</span>
            </a>
        </div>
    </header>
    <form id="bafForm">
        <input type="hidden" id="scriptUrl" value="https://script.google.com/macros/s/AKfycbx3U8N5CW4rUBoAZaG0U-mwrCbVEci0pee0m3-iNuFkV4Pivz8kZB2FqMsbybWctPRjLA/exec">
        <input type="hidden" name="doradca" value="Wiktoria Nojek">
        
        <div style="opacity: 0; position: absolute; top: 0; left: 0; height: 0; width: 0; z-index: -1;">
            <label for="website_hp">Nie wypełniaj tego pola:</label>
            <input type="text" id="website_hp" name="website_hp" tabindex="-1" autocomplete="off">
        </div>

        <div class="form-section">
            <h3>Dane Osobowe i Kontaktowe</h3>
            <div class="grid">
                <div class="form-group"><label>Imię (imiona) i Nazwisko</label><input type="text" name="imie_nazwisko" placeholder="Jan Kowalski" required></div>
                <div class="form-group"><label>PESEL</label><input type="text" name="pesel" pattern="\d{11}" title="11 cyfr" required></div>
                <div class="form-group"><label>Adres e-mail</label><input type="email" name="mail" required></div>
                <div class="form-group"><label>Numer telefonu</label><input type="tel" name="telefon" required></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Dokument Tożsamości</h3>
            <div class="grid">
                <div class="form-group"><label>Seria i numer dowodu osobistego</label><input type="text" name="dowod" required></div>
                <div class="form-group"><label>Data wydania</label><input type="date" name="data_wydania" required></div>
                <div class="form-group"><label>Data ważności</label><input type="date" name="data_waznosci" required></div>
                <div class="form-group"><label>Stan cywilny</label><select name="stan_cywilny"><option value="żonaty/zamężna">Żonaty / Zamężna</option><option value="kawaler/panna">Kawaler / Panna</option><option value="rozwiedziony/a">Rozwiedziony / a</option><option value="wdowiec/wdowa">Wdowiec / Wdowa</option></select></div>
                <div class="form-group"><label>Rozdzielność majątkowa?</label><select name="rozdzielnosc"><option value="Nie">Nie</option><option value="Tak">Tak</option><option value="Nie dotyczy">Nie dotyczy</option></select></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Dane Firmowe i Adresowe</h3>
            <div class="grid">
                <div class="form-group"><label>NIP</label><input type="text" name="nip" required></div>
                <div class="form-group"><label>Data otwarcia działalności</label><input type="date" name="data_idg" required></div>
                <div class="form-group" style="grid-column: span 2;"><label>Adres zamieszkania (Ulica, nr domu/lokalu, kod pocztowy, miasto)</label><input type="text" name="adres_zam" required></div>
                <div class="form-group"><label>Mieszka pod tym adresem od (mm/rrrr)</label><input type="text" name="data_zam" id="data_zam" placeholder="MM/RRRR" maxlength="7" required></div>
                <div class="form-group"><label>Forma własności mieszkania</label><select name="wlasnosc"><option value="Własnościowe">Własnościowe</option><option value="Wynajmowane">Wynajmowane</option><option value="Przy rodzinie">Przy rodzinie</option></select></div>
                <div class="form-group" style="grid-column: span 2;">
                    <label>Adres korespondencyjny</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="koresp_type" value="same" checked onchange="toggleKoresp(false)"> Taki sam jak zamieszkania</label>
                        <label class="radio-option"><input type="radio" name="koresp_type" value="other" onchange="toggleKoresp(true)"> Inny</label>
                    </div>
                    <div id="koresp_input_div" style="display: none;"><input type="text" name="adres_koresp" id="adres_koresp_input" placeholder="Wpisz adres korespondencyjny"></div>
                </div>
                <div class="form-group"><label>Liczba pracowników na UOP</label><input type="number" name="pracownicy" value="0" min="0" onfocus="if(this.value=='0') this.value=''" onblur="if(this.value=='') this.value='0'"></div>
                <div class="form-group"><label>Obsługa klientów</label><select name="klienci"><option value="Jeden główny klient">Jeden główny klient</option><option value="Kilku klientów">Kilku klientów</option><option value="Wielu klientów (detal)">Wielu klientów (detal)</option></select></div>
            </div>
        </div>

        <div class="form-section">
            <h3>Dane Dodatkowe</h3>
            <div class="grid">
                <div class="form-group"><label>Miejsce urodzenia</label><input type="text" name="urodzenie" required></div>
                <div class="form-group"><label>Nazwisko rodowe matki</label><input type="text" name="rodowe_matki" required></div>
                <div class="form-group"><label>Imię Ojca</label><input type="text" name="imie_ojca" required></div>
                <div class="form-group"><label>Imię Matki</label><input type="text" name="imie_matki" required></div>
                <div class="form-group"><label>Wykształcenie</label><select name="wyksztalcenie"><option value="Podstawowe">Podstawowe</option><option value="Zawodowe">Zawodowe</option><option value="Średnie">Średnie</option><option value="Wyższe">Wyższe</option></select></div>
                
                <div class="form-group" style="grid-column: span 2;">
                    <label>Ilość dzieci na utrzymaniu</label>
                    <div style="display: flex; gap: 20px; align-items: flex-start;">
                        <div style="width: 100px;"><input type="number" id="ile_dzieci" value="0" min="0" max="20" onfocus="if(this.value=='0') this.value=''" onblur="if(this.value=='') this.value='0'" oninput="generateChildInputs(this.value)"></div>
                        <div style="flex-grow: 1;"><div id="dzieci_lata_container" class="children-years-container"></div></div>
                    </div>
                    <input type="hidden" name="dzieci" id="dzieci_final">
                </div>

                <div class="form-group" style="grid-column: span 2; background-color: #f0fff4; padding: 15px; border-radius: 8px; border: 1px solid #c6f6d5;">
                    <label style="margin-bottom: 10px;">Czy są Państwo z polecenia?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="polecenie_status" value="tak" onchange="togglePolecenie(true)" required> Jestem z polecenia</label>
                        <label class="radio-option"><input type="radio" name="polecenie_status" value="nie" onchange="togglePolecenie(false)" required> Nie jestem z polecenia</label>
                    </div>
                    <div id="polecenie_input_div" style="display: none; margin-top: 10px;">
                        <input type="text" id="polecenie_osoba" placeholder="Wpisz imię i nazwisko osoby polecającej">
                    </div>
                    <input type="hidden" name="kontynuacja" id="kontynuacja_final">
                </div>

                <div class="form-group" style="grid-column: span 2;">
                    <h3>Załączniki (Opcjonalnie)</h3>
                    <div class="file-upload-wrapper">
                        <label for="file_upload" class="custom-file-upload">+ Dodaj pliki (max 10)</label>
                        <input type="file" id="file_upload" multiple>
                        <ul id="fileList" class="file-list"></ul>
                        <div class="file-hint">Max 5MB na plik. Akceptujemy PDF, JPG, PNG, DOC.</div>
                        <div class="email-hint">Jeśli chcesz wysłać więcej załączników proszę o wysłanie na mój adres mailowy: <strong>wiktoria.nojek@kancelaria-af.com</strong></div>
                    </div>
                </div>

                <div class="form-group" style="grid-column: span 2;"><label>Uwagi</label><textarea name="uwagi"></textarea></div>
            </div>
        </div>

        <div class="checkbox-container">
            <input type="checkbox" id="privacy_policy" name="privacy_policy" required>
            <label for="privacy_policy">Oświadczam, że zapoznałem/am się z Polityką Prywatności i akceptuję jej postanowienia. Rozumiem, że moje dane osobowe będą przetwarzane w celu przygotowania wniosku i procesowania.</label>
        </div>

        <div class="security-badge">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            <span>Połączenie szyfrowane SSL. Twoje dane są bezpieczne.</span>
        </div>

        <button type="submit" class="submit-btn" id="btnSubmit">Wyślij Formularz</button>

        <div class="legal-note">Administratorem Twoich danych osobowych jest Biuro Analizy finansowej Mateusz Dzidkowski z siedzibą w Krakowie. Twoje dane wpisane w formularzu będą przetwarzane wyłącznie w celu przygotowania wniosku i procesowania (zgodnie z art. 6 ust. 1 lit. f RODO – prawnie uzasadniony interes administratora). Pełną informację o Twoich prawach (m.in. dostępu do danych, ich sprostowania czy usunięcia) znajdziesz w naszej <a href="https://biuroanalizyfinansowej.pl/polityka-prywatnosci/" target="_blank">Polityce Prywatności</a>.</div>

        <div class="company-stamp">
            <div class="company-name">BIURO ANALIZY FINANSOWEJ WOJCIECH MŁYNARCZYK</div>
            <div>30-719 Kraków, ul. Gromadzka 103A lok. 2</div>
            <div>NIP: 6581986772 &nbsp; REGON: 369148596</div>
            <div class="company-website"><a href="https://biuroanalizyfinansowej.pl/" target="_blank">biuroanalizyfinansowej.pl</a></div>
        </div>
        <div class="footer-copy">Biuro Analizy Finansowej 2025 © Wszelkie prawa zastrzeżone.</div>
        <div id="message"></div>
    </form>
</div>

<script>
    function toggleKoresp(isOther) { const div = document.getElementById('koresp_input_div'); const input = document.getElementById('adres_koresp_input'); if (isOther) { div.style.display = 'block'; input.required = true; input.value = ''; } else { div.style.display = 'none'; input.required = false; input.value = 'Taki sam jak zamieszkania'; } }
    function togglePolecenie(isReferred) { const div = document.getElementById('polecenie_input_div'); const input = document.getElementById('polecenie_osoba'); if (isReferred) { div.style.display = 'block'; input.required = true; } else { div.style.display = 'none'; input.required = false; input.value = ''; } }
    const dateInput = document.getElementById('data_zam');
    dateInput.addEventListener('input', function(e) { let v = this.value.replace(/\D/g, ''); if (v.length > 6) v = v.slice(0, 6); if (v.length > 2) { this.value = v.slice(0, 2) + '/' + v.slice(2); } else { this.value = v; } });
    function generateChildInputs(count) { const container = document.getElementById('dzieci_lata_container'); container.innerHTML = ''; count = parseInt(count); if (isNaN(count) || count <= 0) return; for (let i = 1; i <= count; i++) { const input = document.createElement('input'); input.type = 'number'; input.placeholder = 'Rok ur. ' + i; input.className = 'child-year-input'; input.min = '1990'; input.max = new Date().getFullYear(); container.appendChild(input); } }
    
    let accumulatedFiles = [];
    const fileInput = document.getElementById('file_upload');
    const fileList = document.getElementById('fileList');
    fileInput.addEventListener('change', function(e) {
        const newFiles = Array.from(this.files);
        if (accumulatedFiles.length + newFiles.length > 10) { alert("Możesz dodać maksymalnie 10 plików."); return; }
        newFiles.forEach(file => { if (file.size > 5 * 1024 * 1024) { alert(`Plik ${file.name} jest za duży (max 5MB).`); return; } if(!accumulatedFiles.some(f => f.name === file.name && f.size === file.size)) { accumulatedFiles.push(file); } });
        renderFileList(); this.value = '';
    });
    function renderFileList() { fileList.innerHTML = ''; accumulatedFiles.forEach((file, index) => { const li = document.createElement('li'); li.className = 'file-item'; li.innerHTML = `<span class="file-item-name">${file.name}</span><button type="button" class="remove-file-btn" onclick="removeFile(${index})" title="Usuń plik">✕</button>`; fileList.appendChild(li); }); }
    window.removeFile = function(index) { accumulatedFiles.splice(index, 1); renderFileList(); }
    const getBase64 = (file) => { return new Promise((resolve, reject) => { const reader = new FileReader(); reader.readAsDataURL(file); reader.onload = () => resolve({ name: file.name, mimeType: file.type, data: reader.result.split(',')[1] }); reader.onerror = error => reject(error); }); };

    document.getElementById('bafForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        if (document.getElementById('website_hp').value !== "") return;
        const btn = document.getElementById('btnSubmit'); const overlay = document.getElementById('loadingOverlay'); const msg = document.getElementById('message'); const scriptURL = document.getElementById('scriptUrl').value;
        if (scriptURL.includes("TUTAJ_WKLEJ")) { alert("Błąd konfiguracji URL"); return; }

        const count = document.getElementById('ile_dzieci').value;
        const yearsInputs = document.querySelectorAll('.child-year-input');
        let finalString = count == 0 ? "0" : count + " (" + Array.from(yearsInputs).map(inp => inp.value).filter(v => v).join(", ") + ")";
        document.getElementById('dzieci_final').value = finalString;

        const polecenieStatus = document.querySelector('input[name="polecenie_status"]:checked').value;
        const polecenieInput = document.getElementById('polecenie_osoba').value;
        document.getElementById('kontynuacja_final').value = (polecenieStatus === 'tak') ? "Z polecenia: " + polecenieInput : "Nie dotyczy";

        const korespType = document.querySelector('input[name="koresp_type"]:checked').value;
        if (korespType === 'same') { document.getElementById('adres_koresp_input').value = "Taki sam jak zamieszkania"; }

        btn.disabled = true; overlay.style.display = 'flex'; msg.style.display = 'none';
        try {
            const formDataObj = {};
            new FormData(document.forms['bafForm']).forEach((value, key) => { if (key !== 'files') formDataObj[key] = value; });
            formDataObj['doradca'] = document.querySelector('input[name="doradca"]').value;
            let filesData = [];
            if (accumulatedFiles.length > 0) { filesData = await Promise.all(accumulatedFiles.map(file => getBase64(file))); }
            const response = await fetch(scriptURL, { method: 'POST', body: JSON.stringify({ formData: formDataObj, files: filesData }) });
            const result = await response.json();
            overlay.style.display = 'none'; msg.style.display = 'block';
            if (result.result === 'success') { msg.className = 'success'; msg.innerHTML = '<strong>Sukces!</strong> Formularz i załączniki zostały przesłane. Dziękujemy.'; document.forms['bafForm'].reset(); document.getElementById('dzieci_lata_container').innerHTML = ''; accumulatedFiles = []; renderFileList(); toggleKoresp(false); togglePolecenie(false); } 
            else { throw new Error(result.error || "Nieznany błąd serwera."); }
        } catch (error) { overlay.style.display = 'none'; msg.style.display = 'block'; msg.className = 'error'; msg.innerHTML = 'Wystąpił błąd: ' + error.message; btn.disabled = false; }
    });
    toggleKoresp(false); togglePolecenie(false);
</script>
</body>
</html>
